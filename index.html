<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Info Mesin</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div id="riwayat">
  <h3>Riwayat Maintenance</h3>
  <div id="dataRiwayat">Memuat...</div>
</div>

<script>
  const idMesin = new URLSearchParams(window.location.search).get("id");
  fetch(`https://script.google.com/macros/s/AKfycbx.../exec?id=${idMesin}`)
    .then(res => res.json())
    .then(data => {
      if (data.length === 0) {
        document.getElementById("dataRiwayat").innerHTML = "Belum ada data.";
        return;
      }
      let html = "<table><tr>";
      Object.keys(data[0]).forEach(key => {
        html += `<th>${key}</th>`;
      });
      html += "</tr>";
      data.forEach(row => {
        html += "<tr>";
        Object.values(row).forEach(val => {
          html += `<td>${val}</td>`;
        });
        html += "</tr>";
      });
      html += "</table>";
      document.getElementById("dataRiwayat").innerHTML = html;
    })
    .catch(err => {
      console.error(err);
      document.getElementById("dataRiwayat").innerText = "Gagal mengambil data.";
    });
</script>

  <div class="container">
    <h2>Deskripsi Unit Mesin</h2>
    <div id="mesin-info"></div>
    <a id="inputLink" href="#"><button>üìù Input Maintenance</button></a>
    <a href="https://docs.google.com/spreadsheets/d/127B92DikeFWmYGmhOP_fso0Ag87LwZGfMkNc9O76js4/edit?usp=sharing" target="_blank"><button>üìä Lihat Data</button></a>
  </div>

  <script>
    const mesinList = {
      "ELMO-01": { merk: "Siemens", daya: "45 kW", rpm: "1480", lokasi: "Press Station" },
      "ELMO-02": { merk: "ABB", daya: "55 kW", rpm: "1480", lokasi: "Kernel Plant" }
    };
    const id = new URLSearchParams(window.location.search).get('id') || "ELMO-01";
    const mesin = mesinList[id] || mesinList["ELMO-01"];
    document.getElementById("mesin-info").innerHTML = `
      <p><strong>ID Mesin:</strong> ${id}</p>
      <p><strong>Merk:</strong> ${mesin.merk}</p>
      <p><strong>Daya:</strong> ${mesin.daya}</p>
      <p><strong>RPM:</strong> ${mesin.rpm}</p>
      <p><strong>Lokasi:</strong> ${mesin.lokasi}</p>
    `;
    document.getElementById("inputLink").href = `input.html?id=${id}`;
  </script>
</body>
</html>
